# Contract Coupon签名方案对比

## 目标
为优惠券在链上验证时选择合适的签名规范，确保安全性、可维护性、可审计性。

## EIP-191

**优点**
1. 实现简单，签名与验签代码短。
2. 兼容性高，几乎所有钱包与 SDK 都支持。
3. 适合简单消息或低风险授权场景。

**缺点**
1. 签名数据是“原始字节串”，结构只存在于约定中。
2. JSON 等字符串序列化存在多种格式，签名易因格式差异失效。
3. 缺少强类型字段与 domain separator，容易出现跨合约或跨链重放。
4. 对业务审计不友好，签名内容不可结构化展示。

**适用场景**
1. 签名内容简单。
2. 风险较低且不需要复杂业务字段。

## EIP-712

**优点**
1. 强类型结构化字段，数据一致性强。
2. 内置 domain separator（链 ID、合约地址、版本），天然防重放。
3. 钱包显示可读性强，方便审计与合规。
4. 适合复杂业务参数的授权。

**缺点**
1. 实现复杂度比 EIP-191 高。
2. 前后端需要严格同步结构定义。
3. 客户端开发门槛略高。

**适用场景**
1. 涉及金额、权限、条件、有效期等复杂字段。
2. 高风险或高价值业务。
3. 需要长期维护与合规审计。

## 选择建议
1. 优惠券属于结构化业务数据，推荐使用 **EIP-712**。
2. 若只做非常轻量的文本授权，可考虑 **EIP-191**。
